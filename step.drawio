<mxfile host="app.diagrams.net" modified="2024-04-25T08:49:34.855Z" agent="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/123.0.0.0 Safari/537.36" etag="3jMtl_lBsXNdcsXGlU3J" version="24.2.7" type="device">
  <diagram id="6u9xbXekWSJj1dmOEqNV" name="第 1 页">
    <mxGraphModel dx="1434" dy="746" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="V5udRrHTm6keU5aFwNDe-9" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="V5udRrHTm6keU5aFwNDe-1" target="V5udRrHTm6keU5aFwNDe-8" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="V5udRrHTm6keU5aFwNDe-29" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontFamily=Helvetica;fontSize=12;fontColor=default;" parent="1" source="V5udRrHTm6keU5aFwNDe-1" target="V5udRrHTm6keU5aFwNDe-13" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="V5udRrHTm6keU5aFwNDe-1" value="monolight.cn&lt;div&gt;&lt;br&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="380" y="80" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="V5udRrHTm6keU5aFwNDe-60" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontFamily=Helvetica;fontSize=12;fontColor=default;" parent="1" source="V5udRrHTm6keU5aFwNDe-2" target="V5udRrHTm6keU5aFwNDe-59" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="V5udRrHTm6keU5aFwNDe-2" value="esp-32" style="whiteSpace=wrap;html=1;rounded=1;" parent="1" vertex="1">
          <mxGeometry x="420" y="440" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="V5udRrHTm6keU5aFwNDe-34" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontFamily=Helvetica;fontSize=12;fontColor=default;" parent="1" source="V5udRrHTm6keU5aFwNDe-8" target="V5udRrHTm6keU5aFwNDe-33" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="V5udRrHTm6keU5aFwNDe-8" value="获取config(ssid/pwd/ratio)" style="whiteSpace=wrap;html=1;rounded=1;" parent="1" vertex="1">
          <mxGeometry x="110" y="150" width="150" height="60" as="geometry" />
        </mxCell>
        <mxCell id="V5udRrHTm6keU5aFwNDe-28" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontFamily=Helvetica;fontSize=12;fontColor=default;" parent="1" source="V5udRrHTm6keU5aFwNDe-13" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="910" y="270" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="V5udRrHTm6keU5aFwNDe-13" value="主页面参数&lt;br&gt;direction、speed" style="whiteSpace=wrap;html=1;rounded=1;" parent="1" vertex="1">
          <mxGeometry x="380" y="190" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="V5udRrHTm6keU5aFwNDe-49" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontFamily=Helvetica;fontSize=12;fontColor=default;" parent="1" source="V5udRrHTm6keU5aFwNDe-33" target="V5udRrHTm6keU5aFwNDe-46" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="V5udRrHTm6keU5aFwNDe-33" value="设置config(ssid/pwd/ratio)" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=default;align=center;verticalAlign=middle;fontFamily=Helvetica;fontSize=12;fontColor=default;fillColor=default;" parent="1" vertex="1">
          <mxGeometry x="105" y="260" width="160" height="60" as="geometry" />
        </mxCell>
        <mxCell id="V5udRrHTm6keU5aFwNDe-43" value="" style="endArrow=classic;startArrow=classic;html=1;rounded=0;fontFamily=Helvetica;fontSize=12;fontColor=default;entryX=1;entryY=0.75;entryDx=0;entryDy=0;exitX=0;exitY=0.25;exitDx=0;exitDy=0;" parent="1" source="V5udRrHTm6keU5aFwNDe-44" target="V5udRrHTm6keU5aFwNDe-8" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="420" y="330" as="sourcePoint" />
            <mxPoint x="470" y="280" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="V5udRrHTm6keU5aFwNDe-45" value="" style="endArrow=classic;startArrow=classic;html=1;rounded=0;fontFamily=Helvetica;fontSize=12;fontColor=default;entryX=1;entryY=0.75;entryDx=0;entryDy=0;exitX=0;exitY=0.25;exitDx=0;exitDy=0;" parent="1" source="V5udRrHTm6keU5aFwNDe-2" target="V5udRrHTm6keU5aFwNDe-44" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="410" y="455" as="sourcePoint" />
            <mxPoint x="260" y="195" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="V5udRrHTm6keU5aFwNDe-44" value="/config" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Helvetica;fontSize=14;fillColor=#fff2cc;strokeColor=#d6b656;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="310" y="320" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="V5udRrHTm6keU5aFwNDe-51" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.75;entryDx=0;entryDy=0;fontFamily=Helvetica;fontSize=12;fontColor=default;" parent="1" source="V5udRrHTm6keU5aFwNDe-46" target="V5udRrHTm6keU5aFwNDe-2" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="V5udRrHTm6keU5aFwNDe-46" value="/set_config" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Helvetica;fontSize=14;fillColor=#fff2cc;strokeColor=#d6b656;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="170" y="420" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="V5udRrHTm6keU5aFwNDe-52" value="" style="endArrow=classic;startArrow=classic;html=1;rounded=0;fontFamily=Helvetica;fontSize=12;fontColor=default;entryX=1;entryY=0.75;entryDx=0;entryDy=0;exitX=0.75;exitY=0;exitDx=0;exitDy=0;" parent="1" source="V5udRrHTm6keU5aFwNDe-2" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="520" y="440" as="sourcePoint" />
            <mxPoint x="480" y="328" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="V5udRrHTm6keU5aFwNDe-53" value="/status" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Helvetica;fontSize=14;fillColor=#fff2cc;strokeColor=#d6b656;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="450" y="300" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="V5udRrHTm6keU5aFwNDe-54" value="" style="endArrow=classic;startArrow=classic;html=1;rounded=0;fontFamily=Helvetica;fontSize=12;fontColor=default;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.608;entryY=0.983;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="V5udRrHTm6keU5aFwNDe-53" target="V5udRrHTm6keU5aFwNDe-13" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="520" y="381.5" as="sourcePoint" />
            <mxPoint x="470" y="249" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="V5udRrHTm6keU5aFwNDe-57" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontFamily=Helvetica;fontSize=12;fontColor=default;" parent="1" source="V5udRrHTm6keU5aFwNDe-55" target="V5udRrHTm6keU5aFwNDe-56" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="V5udRrHTm6keU5aFwNDe-55" value="设置页面参数&lt;br&gt;direciton、speed" style="whiteSpace=wrap;html=1;rounded=1;" parent="1" vertex="1">
          <mxGeometry x="850" y="270" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="V5udRrHTm6keU5aFwNDe-58" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.25;entryDx=0;entryDy=0;fontFamily=Helvetica;fontSize=12;fontColor=default;" parent="1" source="V5udRrHTm6keU5aFwNDe-56" target="V5udRrHTm6keU5aFwNDe-2" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="V5udRrHTm6keU5aFwNDe-56" value="/set_status" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Helvetica;fontSize=14;fillColor=#fff2cc;strokeColor=#d6b656;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="730" y="360" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="V5udRrHTm6keU5aFwNDe-59" value="speed" style="whiteSpace=wrap;html=1;rounded=1;" parent="1" vertex="1">
          <mxGeometry x="420" y="580" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="V5udRrHTm6keU5aFwNDe-74" value="sec per day: 86164.09894" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=default;align=center;verticalAlign=middle;fontFamily=Helvetica;fontSize=12;fontColor=default;fillColor=default;" parent="1" vertex="1">
          <mxGeometry x="30" y="670" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="V5udRrHTm6keU5aFwNDe-75" value="degree per sec:&lt;br&gt;360. / sec per day" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=default;align=center;verticalAlign=middle;fontFamily=Helvetica;fontSize=12;fontColor=default;fillColor=default;" parent="1" vertex="1">
          <mxGeometry x="30" y="760" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="V5udRrHTm6keU5aFwNDe-76" value="初始速度" style="whiteSpace=wrap;html=1;rounded=1;" parent="1" vertex="1">
          <mxGeometry x="300" y="730" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="V5udRrHTm6keU5aFwNDe-78" value="" style="endArrow=none;dashed=1;html=1;rounded=0;fontFamily=Helvetica;fontSize=12;fontColor=default;entryX=0;entryY=1;entryDx=0;entryDy=0;exitX=0.408;exitY=-0.033;exitDx=0;exitDy=0;exitPerimeter=0;" parent="1" source="V5udRrHTm6keU5aFwNDe-76" target="V5udRrHTm6keU5aFwNDe-59" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="420" y="730" as="sourcePoint" />
            <mxPoint x="470" y="680" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="V5udRrHTm6keU5aFwNDe-79" value="最大速度" style="whiteSpace=wrap;html=1;rounded=1;" parent="1" vertex="1">
          <mxGeometry x="440" y="730" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="V5udRrHTm6keU5aFwNDe-80" value="" style="endArrow=none;dashed=1;html=1;rounded=0;fontFamily=Helvetica;fontSize=12;fontColor=default;entryX=0.433;entryY=1;entryDx=0;entryDy=0;exitX=0.408;exitY=-0.033;exitDx=0;exitDy=0;exitPerimeter=0;entryPerimeter=0;" parent="1" source="V5udRrHTm6keU5aFwNDe-79" target="V5udRrHTm6keU5aFwNDe-59" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="560" y="730" as="sourcePoint" />
            <mxPoint x="620" y="640" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="V5udRrHTm6keU5aFwNDe-81" value="自定义速度" style="whiteSpace=wrap;html=1;rounded=1;" parent="1" vertex="1">
          <mxGeometry x="580" y="730" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="V5udRrHTm6keU5aFwNDe-82" value="" style="endArrow=none;dashed=1;html=1;rounded=0;fontFamily=Helvetica;fontSize=12;fontColor=default;entryX=1;entryY=1;entryDx=0;entryDy=0;exitX=0.408;exitY=-0.033;exitDx=0;exitDy=0;exitPerimeter=0;" parent="1" source="V5udRrHTm6keU5aFwNDe-81" target="V5udRrHTm6keU5aFwNDe-59" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="700" y="730" as="sourcePoint" />
            <mxPoint x="760" y="640" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="V5udRrHTm6keU5aFwNDe-83" value="同步地球自转的速度&lt;br&gt;考虑1000：1减速比" style="whiteSpace=wrap;html=1;rounded=1;" parent="1" vertex="1">
          <mxGeometry x="290" y="890" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="V5udRrHTm6keU5aFwNDe-84" value="" style="endArrow=none;dashed=1;html=1;rounded=0;fontFamily=Helvetica;fontSize=12;fontColor=default;entryX=0.417;entryY=1;entryDx=0;entryDy=0;exitX=0.408;exitY=-0.033;exitDx=0;exitDy=0;exitPerimeter=0;entryPerimeter=0;" parent="1" source="V5udRrHTm6keU5aFwNDe-83" target="V5udRrHTm6keU5aFwNDe-76" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="380" y="880" as="sourcePoint" />
            <mxPoint x="380" y="790" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="V5udRrHTm6keU5aFwNDe-85" value="" style="shape=flexArrow;endArrow=classic;html=1;rounded=0;fontFamily=Helvetica;fontSize=12;fontColor=default;exitX=0.425;exitY=1.033;exitDx=0;exitDy=0;entryX=0.608;entryY=0.017;entryDx=0;entryDy=0;entryPerimeter=0;exitPerimeter=0;" parent="1" source="V5udRrHTm6keU5aFwNDe-83" target="V5udRrHTm6keU5aFwNDe-86" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="420" y="830" as="sourcePoint" />
            <mxPoint x="550" y="990" as="targetPoint" />
            <Array as="points">
              <mxPoint x="350" y="990" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="V5udRrHTm6keU5aFwNDe-92" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontFamily=Helvetica;fontSize=12;fontColor=default;" parent="1" source="V5udRrHTm6keU5aFwNDe-86" target="V5udRrHTm6keU5aFwNDe-91" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="V5udRrHTm6keU5aFwNDe-86" value="degree per second&amp;nbsp; / 1000" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=default;align=center;verticalAlign=middle;fontFamily=Helvetica;fontSize=12;fontColor=default;fillColor=default;" parent="1" vertex="1">
          <mxGeometry x="290" y="1020" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="V5udRrHTm6keU5aFwNDe-87" value="电机运转的最大速度，可以先不搞&lt;div&gt;&lt;br&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;rounded=1;" parent="1" vertex="1">
          <mxGeometry x="470" y="890" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="V5udRrHTm6keU5aFwNDe-88" value="" style="endArrow=none;dashed=1;html=1;rounded=0;fontFamily=Helvetica;fontSize=12;fontColor=default;entryX=0.417;entryY=1;entryDx=0;entryDy=0;exitX=0.408;exitY=-0.033;exitDx=0;exitDy=0;exitPerimeter=0;entryPerimeter=0;" parent="1" source="V5udRrHTm6keU5aFwNDe-87" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="560" y="880" as="sourcePoint" />
            <mxPoint x="530" y="790" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="V5udRrHTm6keU5aFwNDe-89" value="从set_status拿到方向和角速度之后计算电机输出&lt;div&gt;&lt;br&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;rounded=1;" parent="1" vertex="1">
          <mxGeometry x="750" y="890" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="V5udRrHTm6keU5aFwNDe-90" value="" style="endArrow=none;dashed=1;html=1;rounded=0;fontFamily=Helvetica;fontSize=12;fontColor=default;entryX=0.642;entryY=0.983;entryDx=0;entryDy=0;exitX=0.408;exitY=-0.033;exitDx=0;exitDy=0;exitPerimeter=0;entryPerimeter=0;" parent="1" source="V5udRrHTm6keU5aFwNDe-89" target="V5udRrHTm6keU5aFwNDe-81" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="840" y="880" as="sourcePoint" />
            <mxPoint x="810" y="790" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="V5udRrHTm6keU5aFwNDe-91" value="大概每秒74HZ" style="whiteSpace=wrap;html=1;rounded=1;" parent="1" vertex="1">
          <mxGeometry x="490" y="1020" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="QDJZ38ZS1l3ItWRu6Cuw-1" value="&lt;h1 style=&quot;margin-top: 0px;&quot;&gt;电机频率计算&lt;/h1&gt;&lt;p&gt;# 地球自转速度，每小时15度&lt;/p&gt;&lt;p&gt;地球自转速度 = 15&amp;nbsp; # 每小时15度&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;# 减速比&lt;/p&gt;&lt;p&gt;减速比 = 1000&amp;nbsp; # 1000:1&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;# 输出端的角速度&lt;/p&gt;&lt;p&gt;# 每小时到每秒转换&lt;/p&gt;&lt;p&gt;秒数_per_小时 = 3600&lt;/p&gt;&lt;p&gt;输出端目标速度 = 地球自转速度 / 秒数_per_小时&amp;nbsp; # 每秒旋转的度数&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;# 输入端的角速度&lt;/p&gt;&lt;p&gt;输入端目标速度 = 输出端目标速度 * 减速比&amp;nbsp; # 计算输入轴需要旋转的角速度&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;# 微步角度&lt;/p&gt;&lt;p&gt;步距角 = 1.8&amp;nbsp; # 步进电机的步距角&lt;/p&gt;&lt;p&gt;细分比 = 32&amp;nbsp; # 1/32细分比&lt;/p&gt;&lt;p&gt;微步角度 = 步距角 / 细分比&amp;nbsp; # 每个微步的角度&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;# 脉冲频率&lt;/p&gt;&lt;p&gt;脉冲频率 = 输入端目标速度 / 微步角度&amp;nbsp; # 每秒产生的脉冲数&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;脉冲频率&amp;nbsp; # 返回脉冲频率的结果&lt;/p&gt;" style="text;html=1;whiteSpace=wrap;overflow=hidden;rounded=0;fontFamily=Helvetica;fontSize=12;fontColor=default;" vertex="1" parent="1">
          <mxGeometry x="1100" y="70" width="180" height="750" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
